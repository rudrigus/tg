library ieee;
use ieee.numeric_std.all;
use ieee.std_logic_1164.all;
use work.common.all;


entity TopoBase is
  port(
  in_clock      : in std_logic;
  in_janela     : in std_logic;
  posArameTopo  : out unsigned(9 downto 0);
  posArameBase  : out unsigned(9 downto 0));
end TopoBase;

architecture comportamental of TopoBase is
signal somaColuna : unsigned(15 downto 0);
signal somaHor : vetorHor;
signal endereco_leitura  : unsigned(13 downto 0) := "00000000000000";
signal q                 : std_logic_vector(7 downto 0);

component ImagensRAM
  PORT(
    clock   : IN STD_LOGIC  := '1';
    data    : IN STD_LOGIC_VECTOR (7 downto 0);
    rdaddress   : IN STD_LOGIC_VECTOR (13 downto 0);
    wraddress   : IN STD_LOGIC_VECTOR (13 downto 0);
    wren    : IN STD_LOGIC  := '0';
    q   : OUT STD_LOGIC_VECTOR (7 downto 0));
END component;


begin

ram : ImagensRAM port map(in_clock, "00000000", std_logic_vector(endereco_leitura), "00000000000000", '0', q);

process (in_clock)
begin
-- derivada da soma do perfil horizontal
  for i in 0 to numlin loop
  somaColuna <= "0000000000000000";
    for j in 0 to numcols loop
      somaColuna <= somaColuna + to_unsigned("00000000" & q, 16);

    end loop ;
  somaHor(i) <= somaColuna;
  end loop;

end process;





end comportamental;
